(()=>{"use strict";const o=function(o){let s=!1;return{shipLength:o,numberOfHits:0,isSunk:function(o,r){return o==r?(s=!0,s):(s=!1,s)},hit:function(){this.numberOfHits+=1},coords:[]}},s=function(){let o=[];const s=[];let r=[],t=[[[" "],[" "],[" "],[" "],[" "],[" "],[" "],[" "],[" "],[" "]],[[" "],[" "],[" "],[" "],[" "],[" "],[" "],[" "],[" "],[" "]],[[" "],[" "],[" "],[" "],[" "],[" "],[" "],[" "],[" "],[" "]],[[" "],[" "],[" "],[" "],[" "],[" "],[" "],[" "],[" "],[" "]],[[" "],[" "],[" "],[" "],[" "],[" "],[" "],[" "],[" "],[" "]],[[" "],[" "],[" "],[" "],[" "],[" "],[" "],[" "],[" "],[" "]],[[" "],[" "],[" "],[" "],[" "],[" "],[" "],[" "],[" "],[" "]],[[" "],[" "],[" "],[" "],[" "],[" "],[" "],[" "],[" "],[" "]],[[" "],[" "],[" "],[" "],[" "],[" "],[" "],[" "],[" "],[" "]],[[" "],[" "],[" "],[" "],[" "],[" "],[" "],[" "],[" "],[" "]]];const e=function(o,s){let r=!1;return o.forEach((o=>{o[0]==s[0]&&o[1]==s[1]&&(console.log("true"),r=!0)})),1==r};function d(o,s){for(let r=o.length;r--;)o[r][0]==s[0]&&o[r][1]==s[1]&&o.splice(r,1)}return{board:t,horizontal:function(o,s,r){for(let t=0;t<o.shipLength;t++){let e=[s,t+r];o.coords.push(e)}},vertical:function(o,s,r){for(let t=0;t<o.shipLength;t++){let e=[t+s,r];o.coords.push(e)}},receiveAttack:function(o,t){e(o.coords,t)?(o.hit(),console.log("hit")):s.push(t),e(r,t)&&d(r,t)},missedCoords:s,currentShips:o,allSunk:function(){let s=[];return o.forEach((o=>{0==o.sunk?s.push(!1):s.push(!0)})),!s.includes(!1)},getPotentialMoves:function(){for(let o=0;o<10;o++)for(let s=0;s<10;s++)r.push([s,o])},potentialMoves:r,matchMove:e,removeAllInstances:d,drawBoard:function(){console.log("Hi");const o=document.getElementsByClassName("container")[0];console.log(o);let s=document.createElement("div");s.classList.add("board-container"),o.appendChild(s),t.forEach((o=>{o.forEach((o=>{let r=document.createElement("div");r.classList.add("individual-square"),s.appendChild(r)," "!=o[0]&&(console.log("yes"),r.classList.add("ship"))}))}))},setUpClickToHit:function(){let o=document.getElementsByClassName("individual-square");for(let s=0;s<o.length;s++)o[s].addEventListener("click",(()=>{console.log("Attack")}))}}},r=function(){let o=[],s=[];const r=function(o){let s=(r=o.potentialMoves.length-1,Math.floor(Math.random()*r));var r;return o.potentialMoves[s]};return{name:"",randomAttack:r,getLegalMoves:function(s){o=[];for(let r=0;r<s.board.length;r++)for(let t=0;t<10;t++)" "==s.board[r][t]&&o.push([r,t])},randomAttack:r,checkMissedCoordsForMatch:function(o,r){let t=!1;s=[];for(let e=0;e<r.length;e++)o[0]==r[e][0]&&o[1]==r[e][1]?t=!0:s.push([o[0],o[1]]);return 1==t}}},t=function(){let t="",e="",d=t,c=s(),n=s();return{swapPlayer:function(){d=d==t?e:t},setUpGame:function(){t=r();const s=o(2);s.coords.push([0,0]),s.coords.push([0,1]),c.board[0][0]=s,c.board[0][1]=s;const d=o(3);d.coords.push([1,0]),d.coords.push([1,1]),d.coords.push([1,2]),c.board[1][0]=s,c.board[1][1]=s,c.board[1][2]=s;const a=o(3);a.coords.push([2,0]),a.coords.push([2,1]),a.coords.push([2,2]),c.board[2][0]=a,c.board[2][1]=a,c.board[2][2]=a;const u=o(4);u.coords.push([3,0]),u.coords.push([3,1]),u.coords.push([3,2]),u.coords.push([3,3]),c.board[3][0]=u,c.board[3][1]=u,c.board[3][2]=u,c.board[3][3]=u;const l=o(5);l.coords.push([4,0]),l.coords.push([4,1]),l.coords.push([4,2]),l.coords.push([4,3]),l.coords.push([4,4]),c.board[4][0]=l,c.board[4][1]=l,c.board[4][2]=l,c.board[4][3]=l,c.board[4][4]=l,e=r();const h=o(2);h.coords.push([0,0]),h.coords.push([0,1]),n.board[0][0]=h,n.board[0][1]=h;const i=o(3);i.coords.push([1,0]),i.coords.push([1,1]),i.coords.push([1,2]),n.board[1][0]=i,n.board[1][1]=i,n.board[1][2]=i;const p=o(3);p.coords.push([2,0]),p.coords.push([2,1]),p.coords.push([2,2]),n.board[2][0]=p,n.board[2][1]=p,n.board[2][2]=p;const b=o(4);b.coords.push([3,0]),b.coords.push([3,1]),b.coords.push([3,2]),b.coords.push([3,3]),n.board[3][0]=b,n.board[3][1]=b,n.board[3][2]=b,n.board[3][3]=b;const f=o(5);f.coords.push([4,0]),f.coords.push([4,1]),f.coords.push([4,2]),f.coords.push([4,3]),f.coords.push([4,4]),n.board[4][0]=f,n.board[4][1]=f,n.board[4][2]=f,n.board[4][3]=f,n.board[4][4]=f},p1Gameboard:c,p2Gameboard:n}}();t.setUpGame(),t.p1Gameboard.drawBoard(),t.p2Gameboard.drawBoard(),t.p1Gameboard.setUpClickToHit(),t.p1Gameboard.setUpClickToHit()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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TUFBTSxHQUFHLEdBQUt1RSxFQUMxQlosRUFBWTNELE1BQU0sR0FBRyxHQUFLdUUsRUFDMUJaLEVBQVkzRCxNQUFNLEdBQUcsR0FBS3VFLEVBQzFCWixFQUFZM0QsTUFBTSxHQUFHLEdBQUt1RSxFQUMxQlosRUFBWTNELE1BQU0sR0FBRyxHQUFLdUUsQ0FDNUIsRUFFZ0NiLGNBQWFDLGNBQy9DLENEdkZhYSxHQUNibEIsRUFBS08sWUFDTFAsRUFBS0ksWUFBWWhDLFlBQ2pCNEIsRUFBS0ssWUFBWWpDLFlBQ2pCNEIsRUFBS0ksWUFBWXJCLGtCQUNqQmlCLEVBQUtJLFlBQVlyQixpQiIsInNvdXJjZXMiOlsid2VicGFjazovL2JhdHRsZXNoaXAvLi9zcmMvc2hpcC5qcyIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwLy4vc3JjL2dhbWVCb2FyZC5qcyIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwLy4vc3JjL3BsYXllci5qcyIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwLy4vc3JjL2luZGV4LmpzIiwid2VicGFjazovL2JhdHRsZXNoaXAvLi9zcmMvZ2FtZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBTaGlwID0gZnVuY3Rpb24gKGxlbmd0aCkge1xuICBjb25zdCBzaGlwTGVuZ3RoID0gbGVuZ3RoO1xuICBsZXQgbnVtYmVyT2ZIaXRzID0gMDtcbiAgbGV0IHN1bmsgPSBmYWxzZTtcbiAgbGV0IGNvb3JkcyA9IFtdO1xuXG4gIGNvbnN0IGhpdCA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLm51bWJlck9mSGl0cyArPSAxO1xuICB9O1xuXG4gIGNvbnN0IGlzU3VuayA9IGZ1bmN0aW9uIChsZW5ndGgsIG51bWJlck9mSGl0cykge1xuICAgIGlmIChsZW5ndGggPT0gbnVtYmVyT2ZIaXRzKSB7XG4gICAgICBzdW5rID0gdHJ1ZTtcbiAgICAgIHJldHVybiBzdW5rO1xuICAgIH0gZWxzZSB7XG4gICAgICBzdW5rID0gZmFsc2U7XG4gICAgICByZXR1cm4gc3VuaztcbiAgICB9XG4gIH07XG5cbiAgcmV0dXJuIHsgc2hpcExlbmd0aCwgbnVtYmVyT2ZIaXRzLCBpc1N1bmssIGhpdCwgY29vcmRzIH07XG59O1xuXG5leHBvcnQgeyBTaGlwIH07XG4iLCIvL2NoZWNrIGZvciBsZWdhbCBtb3Zlc1xuXG5jb25zdCBHYW1lQm9hcmQgPSBmdW5jdGlvbiAoKSB7XG4gIGxldCBzaGlwUGxhY2VtZW50TW9kZSA9IFwiaG9yaXpvbnRhbFwiO1xuICBsZXQgY3VycmVudFNoaXBzID0gW107XG4gIGxldCBzdW5rU2hpcHMgPSBbXTtcbiAgY29uc3QgbWlzc2VkQ29vcmRzID0gW107XG4gIGxldCBwb3RlbnRpYWxNb3ZlcyA9IFtdO1xuXG4gIGxldCBib2FyZCA9IFtcbiAgICBbW1wiIFwiXSwgW1wiIFwiXSwgW1wiIFwiXSwgW1wiIFwiXSwgW1wiIFwiXSwgW1wiIFwiXSwgW1wiIFwiXSwgW1wiIFwiXSwgW1wiIFwiXSwgW1wiIFwiXV0sXG4gICAgW1tcIiBcIl0sIFtcIiBcIl0sIFtcIiBcIl0sIFtcIiBcIl0sIFtcIiBcIl0sIFtcIiBcIl0sIFtcIiBcIl0sIFtcIiBcIl0sIFtcIiBcIl0sIFtcIiBcIl1dLFxuICAgIFtbXCIgXCJdLCBbXCIgXCJdLCBbXCIgXCJdLCBbXCIgXCJdLCBbXCIgXCJdLCBbXCIgXCJdLCBbXCIgXCJdLCBbXCIgXCJdLCBbXCIgXCJdLCBbXCIgXCJdXSxcbiAgICBbW1wiIFwiXSwgW1wiIFwiXSwgW1wiIFwiXSwgW1wiIFwiXSwgW1wiIFwiXSwgW1wiIFwiXSwgW1wiIFwiXSwgW1wiIFwiXSwgW1wiIFwiXSwgW1wiIFwiXV0sXG4gICAgW1tcIiBcIl0sIFtcIiBcIl0sIFtcIiBcIl0sIFtcIiBcIl0sIFtcIiBcIl0sIFtcIiBcIl0sIFtcIiBcIl0sIFtcIiBcIl0sIFtcIiBcIl0sIFtcIiBcIl1dLFxuICAgIFtbXCIgXCJdLCBbXCIgXCJdLCBbXCIgXCJdLCBbXCIgXCJdLCBbXCIgXCJdLCBbXCIgXCJdLCBbXCIgXCJdLCBbXCIgXCJdLCBbXCIgXCJdLCBbXCIgXCJdXSxcbiAgICBbW1wiIFwiXSwgW1wiIFwiXSwgW1wiIFwiXSwgW1wiIFwiXSwgW1wiIFwiXSwgW1wiIFwiXSwgW1wiIFwiXSwgW1wiIFwiXSwgW1wiIFwiXSwgW1wiIFwiXV0sXG4gICAgW1tcIiBcIl0sIFtcIiBcIl0sIFtcIiBcIl0sIFtcIiBcIl0sIFtcIiBcIl0sIFtcIiBcIl0sIFtcIiBcIl0sIFtcIiBcIl0sIFtcIiBcIl0sIFtcIiBcIl1dLFxuICAgIFtbXCIgXCJdLCBbXCIgXCJdLCBbXCIgXCJdLCBbXCIgXCJdLCBbXCIgXCJdLCBbXCIgXCJdLCBbXCIgXCJdLCBbXCIgXCJdLCBbXCIgXCJdLCBbXCIgXCJdXSxcbiAgICBbW1wiIFwiXSwgW1wiIFwiXSwgW1wiIFwiXSwgW1wiIFwiXSwgW1wiIFwiXSwgW1wiIFwiXSwgW1wiIFwiXSwgW1wiIFwiXSwgW1wiIFwiXSwgW1wiIFwiXV0sXG4gIF07XG5cbiAgY29uc3QgZ2V0UG90ZW50aWFsTW92ZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCAxMDsgaSsrKSB7XG4gICAgICBmb3IgKGxldCBhID0gMDsgYSA8IDEwOyBhKyspIHtcbiAgICAgICAgcG90ZW50aWFsTW92ZXMucHVzaChbYSwgaV0pO1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICBjb25zdCBzZXRVcENsaWNrVG9IaXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgbGV0IHNxdWFyZXMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwiaW5kaXZpZHVhbC1zcXVhcmVcIik7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzcXVhcmVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAvLyBzcXVhcmVzW2ldLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBjbGlja1RvQXR0YWNrKCkpO1xuICAgICAgc3F1YXJlc1tpXS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZyhcIkF0dGFja1wiKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfTtcblxuICBjb25zdCBob3Jpem9udGFsID0gZnVuY3Rpb24gKHNoaXAsIHN0YXJ0Um93Q29vcmRzLCBzdGFydENvbHVtbkNvb3Jkcykge1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2hpcC5zaGlwTGVuZ3RoOyBpKyspIHtcbiAgICAgIGxldCBjdXJyZW50Q29vcmQgPSBbc3RhcnRSb3dDb29yZHMsIGkgKyBzdGFydENvbHVtbkNvb3Jkc107XG4gICAgICBzaGlwLmNvb3Jkcy5wdXNoKGN1cnJlbnRDb29yZCk7XG4gICAgfVxuICB9O1xuXG4gIGNvbnN0IHZlcnRpY2FsID0gZnVuY3Rpb24gKHNoaXAsIHN0YXJ0Um93Q29vcmRzLCBzdGFydENvbHVtbkNvb3Jkcykge1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2hpcC5zaGlwTGVuZ3RoOyBpKyspIHtcbiAgICAgIGxldCBjdXJyZW50Q29vcmQgPSBbaSArIHN0YXJ0Um93Q29vcmRzLCBzdGFydENvbHVtbkNvb3Jkc107XG4gICAgICBzaGlwLmNvb3Jkcy5wdXNoKGN1cnJlbnRDb29yZCk7XG4gICAgfVxuICB9O1xuXG4gIGNvbnN0IHBsYWNlU2hpcCA9IGZ1bmN0aW9uIChzaGlwKSB7XG4gICAgc2hpcC5jb29yZHMuZm9yRWFjaCgoY29vcmQpID0+IHtcbiAgICAgIGxldCBvdXRlciA9IGNvb3JkWzBdO1xuICAgICAgbGV0IGlubmVyID0gY29vcmRbMV07XG4gICAgICBib2FyZFtvdXRlcl1baW5uZXJdID0gc2hpcDtcbiAgICB9KTtcbiAgfTtcblxuICBjb25zdCBzZXRTaGlwUG9zaXRpb24gPSBmdW5jdGlvbiAoc2hpcCwgc3RhcnRSb3dDb29yZHMsIHN0YXJ0Q29sdW1uQ29vcmRzKSB7XG4gICAgaWYgKHNoaXBQbGFjZW1lbnRNb2RlID09IFwiaG9yaXpvbnRhbFwiKSB7XG4gICAgICBob3Jpem9udGFsKHNoaXAsIHN0YXJ0Um93Q29vcmRzLCBzdGFydENvbHVtbkNvb3Jkcyk7XG4gICAgfSBlbHNlIGlmIChzaGlwUGxhY2VtZW50TW9kZSA9PSBcInZlcnRpY2FsXCIpIHtcbiAgICAgIHZlcnRpY2FsKHNoaXAsIHN0YXJ0Um93Q29vcmRzLCBzdGFydENvbHVtbkNvb3Jkcyk7XG4gICAgfVxuICB9O1xuXG4gIGNvbnN0IGNoZWNrTmVzdGVkQXJyYXkgPSBmdW5jdGlvbiAoYXJyYXksIGNvb3Jkcykge1xuICAgIGxldCBtYXRjaCA9IGZhbHNlO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYXJyYXkubGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmIChhcnJheVtpXS5pbmNsdWRlcyhjb29yZHNbMF0pICYmIGFycmF5W2ldLmluY2x1ZGVzKGNvb3Jkc1sxXSkpIHtcbiAgICAgICAgbWF0Y2ggPSB0cnVlO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbWF0Y2g7XG4gIH07XG5cbiAgY29uc3QgbWF0Y2hNb3ZlID0gZnVuY3Rpb24gKGFycmF5VG9GaW5kTWF0Y2gsIGNvb3Jkcykge1xuICAgIGxldCBtYXRjaCA9IGZhbHNlO1xuICAgIGFycmF5VG9GaW5kTWF0Y2guZm9yRWFjaCgobW92ZSkgPT4ge1xuICAgICAgaWYgKG1vdmVbMF0gPT0gY29vcmRzWzBdICYmIG1vdmVbMV0gPT0gY29vcmRzWzFdKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwidHJ1ZVwiKTtcbiAgICAgICAgbWF0Y2ggPSB0cnVlO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgaWYgKG1hdGNoID09IHRydWUpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9O1xuXG4gIGZ1bmN0aW9uIHJlbW92ZUFsbEluc3RhbmNlcyhhcnIsIGl0ZW0pIHtcbiAgICBmb3IgKGxldCBpID0gYXJyLmxlbmd0aDsgaS0tOyApIHtcbiAgICAgIGlmIChhcnJbaV1bMF0gPT0gaXRlbVswXSAmJiBhcnJbaV1bMV0gPT0gaXRlbVsxXSkgYXJyLnNwbGljZShpLCAxKTtcbiAgICB9XG4gIH1cblxuICBjb25zdCBjbGlja1RvQXR0YWNrID0gZnVuY3Rpb24gKGNvb3Jkcywgb3Bwb25lbnRHYW1lQm9hcmQpIHtcbiAgICBpZiAob3Bwb25lbnRHYW1lQm9hcmQuYm9hcmRbY29vcmRzWzBdXVtjb29yZHNbMV1dID09IFwiXCIpIHtcbiAgICAgIGNvbnNvbGUubG9nKFwiQmxhbmtcIik7XG4gICAgfVxuICB9O1xuXG4gIGNvbnN0IHJlY2VpdmVBdHRhY2sgPSBmdW5jdGlvbiAoc2hpcCwgY29vcmRzKSB7XG4gICAgaWYgKG1hdGNoTW92ZShzaGlwLmNvb3JkcywgY29vcmRzKSkge1xuICAgICAgc2hpcC5oaXQoKTtcbiAgICAgIGNvbnNvbGUubG9nKFwiaGl0XCIpO1xuICAgIH0gZWxzZSB7XG4gICAgICBtaXNzZWRDb29yZHMucHVzaChjb29yZHMpO1xuICAgIH1cblxuICAgIGlmIChtYXRjaE1vdmUocG90ZW50aWFsTW92ZXMsIGNvb3JkcykpIHtcbiAgICAgIHJlbW92ZUFsbEluc3RhbmNlcyhwb3RlbnRpYWxNb3ZlcywgY29vcmRzKTsgLy8gbmVlZCB0byBjb2RlIHRoaXNcbiAgICB9XG4gIH07XG5cbiAgY29uc3QgYWxsU3VuayA9IGZ1bmN0aW9uICgpIHtcbiAgICBsZXQgYWxsU2hpcHNTdW5rID0gW107XG4gICAgY3VycmVudFNoaXBzLmZvckVhY2goKHNoaXApID0+IHtcbiAgICAgIGlmIChzaGlwLnN1bmsgPT0gZmFsc2UpIHtcbiAgICAgICAgYWxsU2hpcHNTdW5rLnB1c2goZmFsc2UpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYWxsU2hpcHNTdW5rLnB1c2godHJ1ZSk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBpZiAoYWxsU2hpcHNTdW5rLmluY2x1ZGVzKGZhbHNlKSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gIH07XG5cbiAgY29uc3QgZHJhd0JvYXJkID0gZnVuY3Rpb24gKCkge1xuICAgIGNvbnNvbGUubG9nKFwiSGlcIik7XG4gICAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcImNvbnRhaW5lclwiKVswXTtcbiAgICBjb25zb2xlLmxvZyhjb250YWluZXIpO1xuICAgIGxldCBib2FyZENvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgYm9hcmRDb250YWluZXIuY2xhc3NMaXN0LmFkZChcImJvYXJkLWNvbnRhaW5lclwiKTtcbiAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoYm9hcmRDb250YWluZXIpO1xuICAgIGJvYXJkLmZvckVhY2goKGJvYXJkKSA9PiB7XG4gICAgICBib2FyZC5mb3JFYWNoKChpbm5lclNxdWFyZSkgPT4ge1xuICAgICAgICBsZXQgaW5kaXZpZHVhbFNxdWFyZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgIGluZGl2aWR1YWxTcXVhcmUuY2xhc3NMaXN0LmFkZChcImluZGl2aWR1YWwtc3F1YXJlXCIpO1xuICAgICAgICBib2FyZENvbnRhaW5lci5hcHBlbmRDaGlsZChpbmRpdmlkdWFsU3F1YXJlKTtcbiAgICAgICAgaWYgKGlubmVyU3F1YXJlWzBdICE9IFwiIFwiKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coXCJ5ZXNcIik7XG4gICAgICAgICAgaW5kaXZpZHVhbFNxdWFyZS5jbGFzc0xpc3QuYWRkKFwic2hpcFwiKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSk7XG4gIH07XG5cbiAgcmV0dXJuIHtcbiAgICBib2FyZCxcbiAgICBob3Jpem9udGFsLFxuICAgIHZlcnRpY2FsLFxuICAgIHJlY2VpdmVBdHRhY2ssXG4gICAgbWlzc2VkQ29vcmRzLFxuICAgIGN1cnJlbnRTaGlwcyxcbiAgICBhbGxTdW5rLFxuICAgIGdldFBvdGVudGlhbE1vdmVzLFxuICAgIHBvdGVudGlhbE1vdmVzLFxuICAgIG1hdGNoTW92ZSxcbiAgICByZW1vdmVBbGxJbnN0YW5jZXMsXG4gICAgZHJhd0JvYXJkLFxuICAgIHNldFVwQ2xpY2tUb0hpdCxcbiAgfTtcbn07XG5cbmV4cG9ydCB7IEdhbWVCb2FyZCB9O1xuIiwiaW1wb3J0IHsgR2FtZUJvYXJkIH0gZnJvbSBcIi4vZ2FtZUJvYXJkXCI7XG5cbmNvbnN0IFBsYXllciA9IGZ1bmN0aW9uICgpIHtcbiAgY29uc3QgbmFtZSA9IFwiXCI7XG4gIGxldCBsZWdhbE1vdmVzID0gW107XG4gIGxldCBwcmV2aW91c01vdmVzID0gW107XG4gIGxldCBhdmFpbGFibGVNb3ZlcyA9IFtdO1xuXG4gIGNvbnN0IGdldExlZ2FsTW92ZXMgPSBmdW5jdGlvbiAob3Bwb25lbnRHYW1lYm9hcmQpIHtcbiAgICBsZWdhbE1vdmVzID0gW107XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBvcHBvbmVudEdhbWVib2FyZC5ib2FyZC5sZW5ndGg7IGkrKykge1xuICAgICAgZm9yIChsZXQgYSA9IDA7IGEgPCAxMDsgYSsrKSB7XG4gICAgICAgIGlmIChvcHBvbmVudEdhbWVib2FyZC5ib2FyZFtpXVthXSA9PSBcIiBcIikge1xuICAgICAgICAgIGxlZ2FsTW92ZXMucHVzaChbaSwgYV0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIGNvbnN0IGNoZWNrTWlzc2VkQ29vcmRzRm9yTWF0Y2ggPSBmdW5jdGlvbiAoXG4gICAgY29vcmRzLFxuICAgIG9wcG9uZW50R2FtZWJvYXJkTWlzc2VkQ29vcmRzQXJyYXlcbiAgKSB7XG4gICAgbGV0IG1hdGNoID0gZmFsc2U7XG4gICAgYXZhaWxhYmxlTW92ZXMgPSBbXTtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgb3Bwb25lbnRHYW1lYm9hcmRNaXNzZWRDb29yZHNBcnJheS5sZW5ndGg7IGkrKykge1xuICAgICAgLy8gY29uc29sZS5sb2cob3Bwb25lbnRHYW1lYm9hcmRNaXNzZWRDb29yZHNBcnJheVtpXVswXSk7XG4gICAgICAvLyBjb25zb2xlLmxvZyhvcHBvbmVudEdhbWVib2FyZE1pc3NlZENvb3Jkc0FycmF5W2ldWzFdKTtcbiAgICAgIC8vIGNvbnNvbGUubG9nKGNvb3Jkc1swXSA9PSBvcHBvbmVudEdhbWVib2FyZE1pc3NlZENvb3Jkc0FycmF5W2ldWzBdKTtcbiAgICAgIC8vIGNvbnNvbGUubG9nKGNvb3Jkc1sxXSA9PSBvcHBvbmVudEdhbWVib2FyZE1pc3NlZENvb3Jkc0FycmF5W2ldWzFdKTtcblxuICAgICAgaWYgKFxuICAgICAgICBjb29yZHNbMF0gPT0gb3Bwb25lbnRHYW1lYm9hcmRNaXNzZWRDb29yZHNBcnJheVtpXVswXSAmJlxuICAgICAgICBjb29yZHNbMV0gPT0gb3Bwb25lbnRHYW1lYm9hcmRNaXNzZWRDb29yZHNBcnJheVtpXVsxXVxuICAgICAgKSB7XG4gICAgICAgIG1hdGNoID0gdHJ1ZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGF2YWlsYWJsZU1vdmVzLnB1c2goW2Nvb3Jkc1swXSwgY29vcmRzWzFdXSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gY29uc29sZS5sb2coYGF2YWlsYWJsZSA6ICR7YXZhaWxhYmxlTW92ZXN9YCk7XG5cbiAgICBpZiAobWF0Y2ggPT0gdHJ1ZSkge1xuICAgICAgLy8gY29uc29sZS5sb2coXCJJVCBJUyBBIE1BVENIXCIpO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIGNvbnNvbGUubG9nKFwiSVQgSVMgTk9UIEEgTUFUQ0hcIik7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9O1xuXG4gIGZ1bmN0aW9uIGdldFJhbmRvbUludChtYXgpIHtcbiAgICByZXR1cm4gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogbWF4KTtcbiAgfVxuXG4gIGNvbnN0IHJhbmRvbUF0dGFjayA9IGZ1bmN0aW9uIChvcHBvbmVudEdhbWVib2FyZCkge1xuICAgIGxldCByYW5kb21JbmRleCA9IGdldFJhbmRvbUludChvcHBvbmVudEdhbWVib2FyZC5wb3RlbnRpYWxNb3Zlcy5sZW5ndGggLSAxKTtcbiAgICBsZXQgcmFuZG9tTW92ZSA9IG9wcG9uZW50R2FtZWJvYXJkLnBvdGVudGlhbE1vdmVzW3JhbmRvbUluZGV4XTtcbiAgICByZXR1cm4gcmFuZG9tTW92ZTtcbiAgfTtcblxuICByZXR1cm4ge1xuICAgIG5hbWUsXG4gICAgcmFuZG9tQXR0YWNrLFxuICAgIGdldExlZ2FsTW92ZXMsXG4gICAgcmFuZG9tQXR0YWNrLFxuICAgIGNoZWNrTWlzc2VkQ29vcmRzRm9yTWF0Y2gsXG4gIH07XG59O1xuXG5leHBvcnQgeyBQbGF5ZXIgfTtcbiIsImltcG9ydCB7IFNoaXAgfSBmcm9tIFwiLi9zaGlwXCI7XG5pbXBvcnQgeyBHYW1lQm9hcmQgfSBmcm9tIFwiLi9nYW1lQm9hcmRcIjtcbmltcG9ydCB7IFBsYXllciB9IGZyb20gXCIuL3BsYXllclwiO1xuaW1wb3J0IHsgR2FtZSB9IGZyb20gXCIuL2dhbWVcIjtcblxuLy8gY29uc3QgZ2IxID0gR2FtZUJvYXJkKCk7XG4vLyBjb25zdCBnYjIgPSBHYW1lQm9hcmQoKTtcblxuLy8gLy8gY29uc3QgZ2FtZSA9IEdhbWUoKTtcbi8vIC8vIGNvbnN0IHBsYXllciA9IFBsYXllcigpO1xuLy8gLy8gY29uc3Qgc2hpcCA9IFNoaXAoKTtcbi8vIC8vIHNoaXAuY29vcmRzLnB1c2goWzAsIDFdKTtcbi8vIC8vIGdiLmdldFBvdGVudGlhbE1vdmVzKCk7XG4vLyAvLyBsZXQgbW92ZXMgPSBnYi5wb3RlbnRpYWxNb3Zlcztcbi8vIC8vIGNvbnNvbGUubG9nKGdiLnBvdGVudGlhbE1vdmVzLmxlbmd0aCk7XG4vLyAvLyBnYi5yZWNlaXZlQXR0YWNrKHNoaXAsIFswLCAzXSk7XG4vLyAvLyBjb25zb2xlLmxvZyhnYi5wb3RlbnRpYWxNb3Zlcy5sZW5ndGgpO1xuLy8gZ2IxLmRyYXdCb2FyZCgpO1xuLy8gZ2IyLmRyYXdCb2FyZCgpO1xuY29uc3QgZ2FtZSA9IEdhbWUoKTtcbmdhbWUuc2V0VXBHYW1lKCk7XG5nYW1lLnAxR2FtZWJvYXJkLmRyYXdCb2FyZCgpO1xuZ2FtZS5wMkdhbWVib2FyZC5kcmF3Qm9hcmQoKTtcbmdhbWUucDFHYW1lYm9hcmQuc2V0VXBDbGlja1RvSGl0KCk7XG5nYW1lLnAxR2FtZWJvYXJkLnNldFVwQ2xpY2tUb0hpdCgpO1xuIiwiaW1wb3J0IHsgU2hpcCB9IGZyb20gXCIuL3NoaXBcIjtcbmltcG9ydCB7IEdhbWVCb2FyZCB9IGZyb20gXCIuL2dhbWVCb2FyZFwiO1xuaW1wb3J0IHsgUGxheWVyIH0gZnJvbSBcIi4vcGxheWVyXCI7XG5cbmNvbnN0IEdhbWUgPSBmdW5jdGlvbiAoKSB7XG4gIGxldCBwbGF5ZXJPbmUgPSBcIlwiO1xuICBsZXQgcGxheWVyVHdvID0gXCJcIjtcbiAgbGV0IGN1cnJlbnRQbGF5ZXIgPSBwbGF5ZXJPbmU7XG4gIGxldCBwMUdhbWVib2FyZCA9IEdhbWVCb2FyZCgpO1xuICBsZXQgcDJHYW1lYm9hcmQgPSBHYW1lQm9hcmQoKTtcblxuICBjb25zdCBzd2FwUGxheWVyID0gZnVuY3Rpb24gKCkge1xuICAgIGlmIChjdXJyZW50UGxheWVyID09IHBsYXllck9uZSkge1xuICAgICAgY3VycmVudFBsYXllciA9IHBsYXllclR3bztcbiAgICB9IGVsc2Uge1xuICAgICAgY3VycmVudFBsYXllciA9IHBsYXllck9uZTtcbiAgICB9XG4gIH07XG5cbiAgY29uc3Qgc2V0VXBHYW1lID0gZnVuY3Rpb24gKCkge1xuICAgIHBsYXllck9uZSA9IFBsYXllcigpO1xuICAgIC8vIHAxR2FtZWJvYXJkID0gR2FtZUJvYXJkKCk7XG4gICAgY29uc3QgcDFzaGlwMiA9IFNoaXAoMik7XG4gICAgcDFzaGlwMi5jb29yZHMucHVzaChbMCwgMF0pO1xuICAgIHAxc2hpcDIuY29vcmRzLnB1c2goWzAsIDFdKTtcbiAgICBwMUdhbWVib2FyZC5ib2FyZFswXVswXSA9IHAxc2hpcDI7XG4gICAgcDFHYW1lYm9hcmQuYm9hcmRbMF1bMV0gPSBwMXNoaXAyO1xuICAgIGNvbnN0IHAxc2hpcDNhID0gU2hpcCgzKTtcbiAgICBwMXNoaXAzYS5jb29yZHMucHVzaChbMSwgMF0pO1xuICAgIHAxc2hpcDNhLmNvb3Jkcy5wdXNoKFsxLCAxXSk7XG4gICAgcDFzaGlwM2EuY29vcmRzLnB1c2goWzEsIDJdKTtcbiAgICBwMUdhbWVib2FyZC5ib2FyZFsxXVswXSA9IHAxc2hpcDI7XG4gICAgcDFHYW1lYm9hcmQuYm9hcmRbMV1bMV0gPSBwMXNoaXAyO1xuICAgIHAxR2FtZWJvYXJkLmJvYXJkWzFdWzJdID0gcDFzaGlwMjtcbiAgICBjb25zdCBwMXNoaXAzYiA9IFNoaXAoMyk7XG4gICAgcDFzaGlwM2IuY29vcmRzLnB1c2goWzIsIDBdKTtcbiAgICBwMXNoaXAzYi5jb29yZHMucHVzaChbMiwgMV0pO1xuICAgIHAxc2hpcDNiLmNvb3Jkcy5wdXNoKFsyLCAyXSk7XG4gICAgcDFHYW1lYm9hcmQuYm9hcmRbMl1bMF0gPSBwMXNoaXAzYjtcbiAgICBwMUdhbWVib2FyZC5ib2FyZFsyXVsxXSA9IHAxc2hpcDNiO1xuICAgIHAxR2FtZWJvYXJkLmJvYXJkWzJdWzJdID0gcDFzaGlwM2I7XG4gICAgY29uc3QgcDFzaGlwNCA9IFNoaXAoNCk7XG4gICAgcDFzaGlwNC5jb29yZHMucHVzaChbMywgMF0pO1xuICAgIHAxc2hpcDQuY29vcmRzLnB1c2goWzMsIDFdKTtcbiAgICBwMXNoaXA0LmNvb3Jkcy5wdXNoKFszLCAyXSk7XG4gICAgcDFzaGlwNC5jb29yZHMucHVzaChbMywgM10pO1xuICAgIHAxR2FtZWJvYXJkLmJvYXJkWzNdWzBdID0gcDFzaGlwNDtcbiAgICBwMUdhbWVib2FyZC5ib2FyZFszXVsxXSA9IHAxc2hpcDQ7XG4gICAgcDFHYW1lYm9hcmQuYm9hcmRbM11bMl0gPSBwMXNoaXA0O1xuICAgIHAxR2FtZWJvYXJkLmJvYXJkWzNdWzNdID0gcDFzaGlwNDtcbiAgICBjb25zdCBwMXNoaXA1ID0gU2hpcCg1KTtcbiAgICBwMXNoaXA1LmNvb3Jkcy5wdXNoKFs0LCAwXSk7XG4gICAgcDFzaGlwNS5jb29yZHMucHVzaChbNCwgMV0pO1xuICAgIHAxc2hpcDUuY29vcmRzLnB1c2goWzQsIDJdKTtcbiAgICBwMXNoaXA1LmNvb3Jkcy5wdXNoKFs0LCAzXSk7XG4gICAgcDFzaGlwNS5jb29yZHMucHVzaChbNCwgNF0pO1xuICAgIHAxR2FtZWJvYXJkLmJvYXJkWzRdWzBdID0gcDFzaGlwNTtcbiAgICBwMUdhbWVib2FyZC5ib2FyZFs0XVsxXSA9IHAxc2hpcDU7XG4gICAgcDFHYW1lYm9hcmQuYm9hcmRbNF1bMl0gPSBwMXNoaXA1O1xuICAgIHAxR2FtZWJvYXJkLmJvYXJkWzRdWzNdID0gcDFzaGlwNTtcbiAgICBwMUdhbWVib2FyZC5ib2FyZFs0XVs0XSA9IHAxc2hpcDU7XG5cbiAgICBwbGF5ZXJUd28gPSBQbGF5ZXIoKTtcbiAgICAvLyBwMkdhbWVib2FyZCA9IEdhbWVCb2FyZCgpO1xuICAgIGNvbnN0IHAyc2hpcDIgPSBTaGlwKDIpO1xuICAgIHAyc2hpcDIuY29vcmRzLnB1c2goWzAsIDBdKTtcbiAgICBwMnNoaXAyLmNvb3Jkcy5wdXNoKFswLCAxXSk7XG4gICAgcDJHYW1lYm9hcmQuYm9hcmRbMF1bMF0gPSBwMnNoaXAyO1xuICAgIHAyR2FtZWJvYXJkLmJvYXJkWzBdWzFdID0gcDJzaGlwMjtcbiAgICBjb25zdCBwMnNoaXAzYSA9IFNoaXAoMyk7XG4gICAgcDJzaGlwM2EuY29vcmRzLnB1c2goWzEsIDBdKTtcbiAgICBwMnNoaXAzYS5jb29yZHMucHVzaChbMSwgMV0pO1xuICAgIHAyc2hpcDNhLmNvb3Jkcy5wdXNoKFsxLCAyXSk7XG4gICAgcDJHYW1lYm9hcmQuYm9hcmRbMV1bMF0gPSBwMnNoaXAzYTtcbiAgICBwMkdhbWVib2FyZC5ib2FyZFsxXVsxXSA9IHAyc2hpcDNhO1xuICAgIHAyR2FtZWJvYXJkLmJvYXJkWzFdWzJdID0gcDJzaGlwM2E7XG4gICAgY29uc3QgcDJzaGlwM2IgPSBTaGlwKDMpO1xuICAgIHAyc2hpcDNiLmNvb3Jkcy5wdXNoKFsyLCAwXSk7XG4gICAgcDJzaGlwM2IuY29vcmRzLnB1c2goWzIsIDFdKTtcbiAgICBwMnNoaXAzYi5jb29yZHMucHVzaChbMiwgMl0pO1xuICAgIHAyR2FtZWJvYXJkLmJvYXJkWzJdWzBdID0gcDJzaGlwM2I7XG4gICAgcDJHYW1lYm9hcmQuYm9hcmRbMl1bMV0gPSBwMnNoaXAzYjtcbiAgICBwMkdhbWVib2FyZC5ib2FyZFsyXVsyXSA9IHAyc2hpcDNiO1xuICAgIGNvbnN0IHAyc2hpcDQgPSBTaGlwKDQpO1xuICAgIHAyc2hpcDQuY29vcmRzLnB1c2goWzMsIDBdKTtcbiAgICBwMnNoaXA0LmNvb3Jkcy5wdXNoKFszLCAxXSk7XG4gICAgcDJzaGlwNC5jb29yZHMucHVzaChbMywgMl0pO1xuICAgIHAyc2hpcDQuY29vcmRzLnB1c2goWzMsIDNdKTtcbiAgICBwMkdhbWVib2FyZC5ib2FyZFszXVswXSA9IHAyc2hpcDQ7XG4gICAgcDJHYW1lYm9hcmQuYm9hcmRbM11bMV0gPSBwMnNoaXA0O1xuICAgIHAyR2FtZWJvYXJkLmJvYXJkWzNdWzJdID0gcDJzaGlwNDtcbiAgICBwMkdhbWVib2FyZC5ib2FyZFszXVszXSA9IHAyc2hpcDQ7XG4gICAgY29uc3QgcDJzaGlwNSA9IFNoaXAoNSk7XG4gICAgcDJzaGlwNS5jb29yZHMucHVzaChbNCwgMF0pO1xuICAgIHAyc2hpcDUuY29vcmRzLnB1c2goWzQsIDFdKTtcbiAgICBwMnNoaXA1LmNvb3Jkcy5wdXNoKFs0LCAyXSk7XG4gICAgcDJzaGlwNS5jb29yZHMucHVzaChbNCwgM10pO1xuICAgIHAyc2hpcDUuY29vcmRzLnB1c2goWzQsIDRdKTtcbiAgICBwMkdhbWVib2FyZC5ib2FyZFs0XVswXSA9IHAyc2hpcDU7XG4gICAgcDJHYW1lYm9hcmQuYm9hcmRbNF1bMV0gPSBwMnNoaXA1O1xuICAgIHAyR2FtZWJvYXJkLmJvYXJkWzRdWzJdID0gcDJzaGlwNTtcbiAgICBwMkdhbWVib2FyZC5ib2FyZFs0XVszXSA9IHAyc2hpcDU7XG4gICAgcDJHYW1lYm9hcmQuYm9hcmRbNF1bNF0gPSBwMnNoaXA1O1xuICB9O1xuXG4gIHJldHVybiB7IHN3YXBQbGF5ZXIsIHNldFVwR2FtZSwgcDFHYW1lYm9hcmQsIHAyR2FtZWJvYXJkIH07XG59O1xuXG5leHBvcnQgeyBHYW1lIH07XG4iXSwibmFtZXMiOlsiU2hpcCIsImxlbmd0aCIsInN1bmsiLCJzaGlwTGVuZ3RoIiwibnVtYmVyT2ZIaXRzIiwiaXNTdW5rIiwiaGl0IiwidGhpcyIsImNvb3JkcyIsIkdhbWVCb2FyZCIsImN1cnJlbnRTaGlwcyIsIm1pc3NlZENvb3JkcyIsInBvdGVudGlhbE1vdmVzIiwiYm9hcmQiLCJtYXRjaE1vdmUiLCJhcnJheVRvRmluZE1hdGNoIiwibWF0Y2giLCJmb3JFYWNoIiwibW92ZSIsImNvbnNvbGUiLCJsb2ciLCJyZW1vdmVBbGxJbnN0YW5jZXMiLCJhcnIiLCJpdGVtIiwiaSIsInNwbGljZSIsImhvcml6b250YWwiLCJzaGlwIiwic3RhcnRSb3dDb29yZHMiLCJzdGFydENvbHVtbkNvb3JkcyIsImN1cnJlbnRDb29yZCIsInB1c2giLCJ2ZXJ0aWNhbCIsInJlY2VpdmVBdHRhY2siLCJhbGxTdW5rIiwiYWxsU2hpcHNTdW5rIiwiaW5jbHVkZXMiLCJnZXRQb3RlbnRpYWxNb3ZlcyIsImEiLCJkcmF3Qm9hcmQiLCJjb250YWluZXIiLCJkb2N1bWVudCIsImdldEVsZW1lbnRzQnlDbGFzc05hbWUiLCJib2FyZENvbnRhaW5lciIsImNyZWF0ZUVsZW1lbnQiLCJjbGFzc0xpc3QiLCJhZGQiLCJhcHBlbmRDaGlsZCIsImlubmVyU3F1YXJlIiwiaW5kaXZpZHVhbFNxdWFyZSIsInNldFVwQ2xpY2tUb0hpdCIsInNxdWFyZXMiLCJhZGRFdmVudExpc3RlbmVyIiwiUGxheWVyIiwibGVnYWxNb3ZlcyIsImF2YWlsYWJsZU1vdmVzIiwicmFuZG9tQXR0YWNrIiwib3Bwb25lbnRHYW1lYm9hcmQiLCJyYW5kb21JbmRleCIsIm1heCIsIk1hdGgiLCJmbG9vciIsInJhbmRvbSIsIm5hbWUiLCJnZXRMZWdhbE1vdmVzIiwiY2hlY2tNaXNzZWRDb29yZHNGb3JNYXRjaCIsIm9wcG9uZW50R2FtZWJvYXJkTWlzc2VkQ29vcmRzQXJyYXkiLCJnYW1lIiwicGxheWVyT25lIiwicGxheWVyVHdvIiwiY3VycmVudFBsYXllciIsInAxR2FtZWJvYXJkIiwicDJHYW1lYm9hcmQiLCJzd2FwUGxheWVyIiwic2V0VXBHYW1lIiwicDFzaGlwMiIsInAxc2hpcDNhIiwicDFzaGlwM2IiLCJwMXNoaXA0IiwicDFzaGlwNSIsInAyc2hpcDIiLCJwMnNoaXAzYSIsInAyc2hpcDNiIiwicDJzaGlwNCIsInAyc2hpcDUiLCJHYW1lIl0sInNvdXJjZVJvb3QiOiIifQ==